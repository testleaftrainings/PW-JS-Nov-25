ðŸ“‘ Agenda for Week 06 Day 02: Playwright with REST API Integration

ðŸŽ¯ [ Focus: Integrating Playwright with REST APIs for End-to-End Automation Testing ]

ðŸ“† [21 Dec. Sunday]  

ðŸ• Session Highlights  

â¿¡ Recap  
* Quick review of key learnings from previous sessions.  

SALESFORCE :
------------
â¿¦ APIRequest, APIRequestContext, APIResponse  
* Overview of these key Playwright API concepts.  

â¿§ Status Code, Response Body & Response Time  
* Understanding and validating API response attributes.  

â¿¨ POST Call (Creating a Lead)  
* Demonstration of making POST requests in Playwright.  

â¿© GET Call (Retrieving the Lead)  
* Retrieving data using GET requests in Playwright.  

 DELETE Call (Deleting the Lead)  
* Automating the deletion of records using DELETE requests.  

***************************************************************************************

Developer Guide :
-----------------

Salesforce document to get endpoint to generate access token  :
https://help.salesforce.com/s/articleView?languempId=en_US&id=xcloud.remoteaccess_oauth_endpoints.htm&type=5

Salesforce document to do CRUD operation for  Lead /Account :
https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/intro_curl.htm 


--------------------------------------
Steps to find the field in salesforce :
----------------------------------------

From Salesforce Setup (Recommended)

Log in to your Salesforce Developer Org.

Go to Setup â†’ Object ManempIdr.

Search for and click on Lead.

Open Fields & Relationships.

Youâ€™ll see a list of all the fields available on the Lead object.

The Field Label is what you see in the UI (e.g., â€œLast Nameâ€).

The Field Name is what you use in the API (e.g., LastName, Company).

These â€œField Namesâ€ are what you should use in your JSON request body.

https://testleaf22-dev-ed.develop.my.salesforce-setup.com/lightning/setup/ObjectManempIdr/Lead/FieldsAndRelationships/view

âœ… Example:

{

  "LastName": "Ravindran",
  "Company": "Testleaf",
  "Email": "ravi@testleaf.com",
  "Phone": "8888888"
}

-------------------------------------------------------------------------------

Script used to set global and environment variable:
-----------------------------------

  var generate_reponse = pm.response.json()
  console.log(generate_reponse)


var resToken = generate_reponse.access_token
console.log(resToken)

var url = generate_reponse.instance_url
console.log(url) // https://testleaf22-dev-ed.develop.my.salesforce.com


pm.globals.set("InstanceURL",url)

pm.environment.set("token",resToken)

Script used to set collection variable:
-----------------------------------


var lead_response = pm.response.json();

var resID = lead_response.id

pm.collectionVariables.set("leadId",resID)

---------------------------------------------

# Serialization and Deserialization in REST API (TypeScript)

In **REST APIs**, **serialization** and **deserialization** are about **converting data between objects and a format that can travel over the network** (like JSON).

This is extremely important when working with **API testing, Playwright API testing, or frontend-backend communication**.

---

## 1ï¸âƒ£ What is Serialization?

### âœ… Definition

**Serialization** is the process of **converting a TypeScript/JavaScript object into JSON** so it can be sent over HTTP.

ðŸ“¦ Object â†’ ðŸ“„ JSON

---

### ðŸ”¹ Real-life analogy

Think of **serialization** like:

> Packing your luggempId into a **suitcase** before travelling âœˆï¸

Clothes (object) â†’ packed suitcase (JSON)

---

### ðŸ”¹ Example (REST API Request)

#### TypeScript object

```ts
const user = {
  name: "Ravi",
  empId: 30,
  city: "Chennai"
};
```

#### After serialization (JSON sent in request body)

```json
{
  "name": "Ravi",
  "empId": 30,
  "city": "Chennai"
}
```

âž¡ï¸ This JSON is what actually travels over HTTP.

> In JavaScript/TypeScript, this conversion is usually done using:

```ts
JSON.stringify(user);
```

---

### ðŸ”¹ Where serialization happens

* When **client sends request body**
* While calling **POST / PUT / PATCH APIs**

---

## 2ï¸âƒ£ What is Deserialization?

### âœ… Definition

**Deserialization** is the process of **converting received JSON back into a TypeScript object**.

ðŸ“„ JSON â†’  Object

---

### ðŸ”¹ Real-life analogy

Think of **deserialization** like:

> Unpacking your suitcase after reaching your destination ðŸ§³

Suitcase (JSON) â†’ clothes (object)

---

### ðŸ”¹ Example (REST API Response)

#### API Response (JSON)

```json
{
  "id": 101,
  "name": "Ravi",
  "empId": 30,
  "city": "Chennai"
}
```

#### After deserialization (TypeScript object)

const responseBody = await response.json(); // JSON â†’ Object
console.log(responseBody.name); // Ravi


> This is internally similar to:

```ts
JSON.parse(jsonString);
```

---

### ðŸ”¹ Where deserialization happens

* When **client receives response**
* While validating **API responses**

---

## 3ï¸âƒ£ Serialization vs Deserialization (Quick Table)

| Aspect     | Serialization | Deserialization |
| ---------- | ------------- | --------------- |
| Direction  | Object â†’ JSON | JSON â†’ Object   |
| Used in    | Request body  | Response body   |
| Happens at | Client side   | Client side     |
| Purpose    | Send data     | Read / validate |

---

## 4ï¸âƒ£ Why are they important in REST API testing?

Especially useful when you do **automation** using **Playwright API**, **Axios**, or **Fetch**.

### ðŸ”¹ Benefits

âœ… Cleaner code
âœ… Easy request creation
âœ… Type safety (with interfaces)
âœ… Less manual JSON handling

---

## 5ï¸âƒ£ Example in Playwright API Testing

### ðŸ”¹ Serialization (request)

```ts
await request.post("/users", {
  data: user   // Object auto-serialized to JSON
});
```

---

### ðŸ”¹ Deserialization (response)

```ts
const response = await request.get("/users/101");
const userData = await response.json(); // JSON â†’ Object

console.log(userData.name);
```

---

## 6ï¸âƒ£ Simple 

> **Serialization = Send**
> **Deserialization = Receive**

---

## 7ï¸âƒ£ In short

> **Serialization** converts a TypeScript object into JSON so it can be sent in a REST API request.
> **Deserialization** converts the received JSON response back into a TypeScript object for easy processing and validation.

---


https://forms.office.com/r/4hxfJ8yKJu


test.use({storageState:`Data/login_SF.json`})